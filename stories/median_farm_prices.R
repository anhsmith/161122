"https://www.interest.co.nz/charts/rural/farm-prices-dairy-land"


html <- "<table><thead><tr><th>Date</th><th></th></tr></thead><tbody><tr><td>Mar 31, 2009</td><td>39,736</td></tr><tr><td>Apr 30, 2009</td><td>31,533</td></tr><tr><td>May 31, 2009</td><td>30,883</td></tr><tr><td>Jun 30, 2009</td><td>29,720</td></tr><tr><td>Jul 31, 2009</td><td>31,160</td></tr><tr><td>Aug 31, 2009</td><td>28,541</td></tr><tr><td>Sep 30, 2009</td><td>24,958</td></tr><tr><td>Oct 31, 2009</td><td>33,318</td></tr><tr><td>Nov 30, 2009</td><td>33,318</td></tr><tr><td>Dec 31, 2009</td><td>32,659</td></tr><tr><td>Jan 31, 2010</td><td>32,000</td></tr><tr><td>Feb 28, 2010</td><td>31,203</td></tr><tr><td>Mar 31, 2010</td><td>32,000</td></tr><tr><td>Apr 30, 2010</td><td>34,941</td></tr><tr><td>May 31, 2010</td><td>33,509</td></tr><tr><td>Jun 30, 2010</td><td>32,609</td></tr><tr><td>Jul 31, 2010</td><td>36,667</td></tr><tr><td>Aug 31, 2010</td><td>36,667</td></tr><tr><td>Sep 30, 2010</td><td>37,637</td></tr><tr><td>Oct 31, 2010</td><td>27,808</td></tr><tr><td>Nov 30, 2010</td><td>26,590</td></tr><tr><td>Dec 31, 2010</td><td>35,074</td></tr><tr><td>Jan 31, 2011</td><td>35,090</td></tr><tr><td>Feb 28, 2011</td><td>36,687</td></tr><tr><td>Mar 31, 2011</td><td>32,533</td></tr><tr><td>Apr 30, 2011</td><td>30,879</td></tr><tr><td>May 31, 2011</td><td>30,825</td></tr><tr><td>Jun 30, 2011</td><td>30,828</td></tr><tr><td>Jul 31, 2011</td><td>32,854</td></tr><tr><td>Aug 31, 2011</td><td>31,050</td></tr><tr><td>Sep 30, 2011</td><td>29,668</td></tr><tr><td>Oct 31, 2011</td><td>29,668</td></tr><tr><td>Nov 30, 2011</td><td>36,766</td></tr><tr><td>Dec 31, 2011</td><td>37,045</td></tr>"
html2 <- "<tr><td>Jan 31, 2012</td><td>34,298</td></tr><tr><td>Feb 29, 2012</td><td>34,223</td></tr><tr><td>Mar 31, 2012</td><td>32,294</td></tr><tr><td>Apr 30, 2012</td><td>33,132</td></tr><tr><td>May 31, 2012</td><td>29,485</td></tr><tr><td>Jun 30, 2012</td><td>27,919</td></tr><tr><td>Jul 31, 2012</td><td>22,679</td></tr><tr><td>Aug 31, 2012</td><td>24,492</td></tr><tr><td>Sep 30, 2012</td><td>19,604</td></tr><tr><td>Oct 31, 2012</td><td>27,368</td></tr><tr><td>Nov 30, 2012</td><td>37,166</td></tr><tr><td>Dec 31, 2012</td><td>34,483</td></tr><tr><td>Jan 31, 2013</td><td>35,530</td></tr><tr><td>Feb 28, 2013</td><td>33,254</td></tr><tr><td>Mar 31, 2013</td><td>35,487</td></tr><tr><td>Apr 30, 2013</td><td>34,819</td></tr><tr><td>May 31, 2013</td><td>34,850</td></tr><tr><td>Jun 30, 2013</td><td>29,555</td></tr><tr><td>Jul 31, 2013</td><td>34,882</td></tr><tr><td>Aug 31, 2013</td><td>32,234</td></tr><tr><td>Sep 30, 2013</td><td>34,912</td></tr><tr><td>Oct 31, 2013</td><td>32,701</td></tr><tr><td>Nov 30, 2013</td><td>40,023</td></tr><tr><td>Dec 31, 2013</td><td>38,267</td></tr><tr><td>Jan 31, 2014</td><td>36,509</td></tr><tr><td>Feb 28, 2014</td><td>34,499</td></tr><tr><td>Mar 31, 2014</td><td>34,474</td></tr><tr><td>Apr 30, 2014</td><td>34,615</td></tr><tr><td>May 31, 2014</td><td>33,543</td></tr><tr><td>Jun 30, 2014</td><td>33,543</td></tr><tr><td>Jul 31, 2014</td><td>36,673</td></tr><tr><td>Aug 31, 2014</td><td>43,125</td></tr><tr><td>Sep 30, 2014</td><td>40,462</td></tr><tr><td>Oct 31, 2014</td><td>43,299</td></tr><tr><td>Nov 30, 2014</td><td>36,825</td></tr><tr><td>Dec 31, 2014</td><td>41,227</td></tr><tr><td>Jan 31, 2015</td><td>27,997</td></tr><tr><td>Feb 28, 2015</td><td>45,105</td></tr><tr><td>Mar 31, 2015</td><td>37,761</td></tr><tr><td>Apr 30, 2015</td><td>38,802</td></tr><tr><td>May 31, 2015</td><td>35,281</td></tr><tr><td>Jun 30, 2015</td><td>35,531</td></tr><tr><td>Jul 31, 2015</td><td>35,304</td></tr><tr><td>Aug 31, 2015</td><td>26,906</td></tr><tr><td>Sep 30, 2015</td><td>25,108</td></tr><tr><td>Oct 31, 2015</td><td>31,552</td></tr><tr><td>Nov 30, 2015</td><td>35,554</td></tr><tr><td>Dec 31, 2015</td><td>39,690</td></tr><tr><td>Jan 31, 2016</td><td>39,367</td></tr><tr><td>Feb 29, 2016</td><td>36,687</td></tr><tr><td>Mar 31, 2016</td><td>33,897</td></tr><tr><td>Apr 30, 2016</td><td>33,507</td></tr><tr><td>May 31, 2016</td><td>33,507</td></tr><tr><td>Jun 30, 2016</td><td>32,615</td></tr><tr><td>Jul 31, 2016</td><td>35,614</td></tr><tr><td>Aug 31, 2016</td><td>40,469</td></tr><tr><td>Sep 30, 2016</td><td>33,132</td></tr><tr><td>Oct 31, 2016</td><td>40,716</td></tr><tr><td>Nov 30, 2016</td><td>47,385</td></tr><tr><td>Dec 31, 2016</td><td>46,397</td></tr><tr><td>Jan 31, 2017</td><td>44,322</td></tr><tr><td>Feb 28, 2017</td><td>39,642</td></tr><tr><td>Mar 31, 2017</td><td>37,066</td></tr><tr><td>Apr 30, 2017</td><td>35,186</td></tr><tr><td>May 31, 2017</td><td>34,789</td></tr><tr><td>Jun 30, 2017</td><td>34,789</td></tr><tr><td>Jul 31, 2017</td><td>36,332</td></tr><tr><td>Aug 31, 2017</td><td>37,842</td></tr><tr><td>Sep 30, 2017</td><td>37,812</td></tr><tr><td>Oct 31, 2017</td><td>40,012</td></tr><tr><td>Nov 30, 2017</td><td>44,154</td></tr><tr><td>Dec 31, 2017</td><td>40,484</td></tr><tr><td>Jan 31, 2018</td><td>37,235</td></tr><tr><td>Feb 28, 2018</td><td>34,238</td></tr><tr><td>Mar 31, 2018</td><td>33,750</td></tr><tr><td>Apr 30, 2018</td><td>36,028</td></tr><tr><td>May 31, 2018</td><td>35,901</td></tr><tr><td>Jun 30, 2018</td><td>31,881</td></tr><tr><td>Jul 31, 2018</td><td>31,881</td></tr><tr><td>Aug 31, 2018</td><td>30,830</td></tr><tr><td>Sep 30, 2018</td><td>30,876</td></tr><tr><td>Oct 31, 2018</td><td>28,555</td></tr><tr><td>Nov 30, 2018</td><td>50,964</td></tr><tr><td>Dec 31, 2018</td><td>40,589</td></tr><tr><td>Jan 31, 2019</td><td>38,642</td></tr><tr><td>Feb 28, 2019</td><td>35,807</td></tr><tr><td>Mar 31, 2019</td><td>37,100</td></tr><tr><td>Apr 30, 2019</td><td>30,243</td></tr><tr><td>May 31, 2019</td><td>31,248</td></tr></tbody></table>"

html <- paste(html, html2, sep="")

library(rvest)

foo <- html_table(minimal_html(html) %>% html_node("table"))

bar <- foo %>% set_names(nm=c("Date", "Price")) %>% mutate(Date = mdy(Date), Price = parse_number(Price),
                                                           Year = time_length(Date-min(Date), unit="year"))

ggplot(bar, aes(x=Date, y=Price)) + geom_line() +
  geom_smooth(method = 'lm') + scale_y_log10()

summary(lm(log(Price) ~ Year, data=bar))
exp(coef(lm(log(Price) ~ Year, data=bar)))
